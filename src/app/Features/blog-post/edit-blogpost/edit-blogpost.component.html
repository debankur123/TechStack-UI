<div class="container">
  <h1 class="mt-3">EDIT BLOG POSTS</h1>
  <form class="row">
    <div class="col-md-6 mt-3">
      <label for="title" class="form-label">Title</label>
      <input type="text" id="title" name="title" pInputText class="p-inputtext p-component smaller-input"
        style="width: 100%" [(ngModel)]="FormData.blogModule.title" [ngModelOptions]="{standalone: true}">
    </div>
    <div class="col-md-6 mt-3">
      <label for="URLHandle" class="form-label">URL Handle</label>
      <input type="text" id="URLHandle" name="URLHandle" pInputText class="p-inputtext p-component smaller-input"
        style="width: 100%" [(ngModel)]="FormData.blogModule.urlHandle" [ngModelOptions]="{standalone: true}">
    </div>

    <div class="col-md-6 mt-3">
      <label for="shortDescription" class="form-label">Short Description</label>
      <input type="text" id="ShortDescription" name="ShortDescription" pInputText
        class="p-inputtext p-component smaller-input" style="width: 100%"
        [(ngModel)]="FormData.blogModule.shortDescription" [ngModelOptions]="{standalone: true}">
    </div>

    <div class="col-md-12 mt-3">
      <label for="content" class="form-label">Content</label>
      <div class="d-flex flex-row">
        <textarea id="content" name="content" [(ngModel)]="FormData.content[0].content"
          [ngModelOptions]="{standalone: true}" class="p-inputtext p-component smaller-input"
          style="height: 350px; max-height: 350px;"></textarea>
        <div class="col-md-6 p-2" style="max-height: 350px; overflow-y: scroll;">
          <markdown [data]="FormData.content[0].content"></markdown>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3 justify-content-center">
      <label for="categories" class="form-label">Categories</label>
      <br>
      <ng-container *ngIf="categories$ | async as categories">
        <p-multiSelect [options]="categories" [(ngModel)]="selectedCategories" [ngModelOptions]="{standalone: true}"
          optionLabel="name" defaultLabel="Select Categories" [showHeader]="true" [style]="{ 'width': '100%' }">
        </p-multiSelect>
      </ng-container>
    </div>

    <div class="col-md-6 mt-3">
      <label for="FeaturedImageURL" class="form-label">Featured Image URL 
        <button type="button" pButton class="primary-button" icon="pi pi-upload" (click)="openImageSelector()"
          style="margin-left: 25px; background-color: black; color: white; border: none; width: 50px; height: 25px;"></button>
      </label>
      <ng-container *ngIf="FormData.blogModule.featuredImageURL !== ''">
        <div>
          <img [src]="FormData.blogModule.featuredImageURL" height="100" class="my-2">
        </div>
      </ng-container>
      <input type="text" id="FeaturedImageURL" name="FeaturedImageURL" pInputText
        class="p-inputtext p-component smaller-input" style="width: 100%"
        [(ngModel)]="FormData.blogModule.featuredImageURL" [ngModelOptions]="{standalone: true}">
    </div>

    <div class="col-md-6 mt-3">
      <label for="Author" class="form-label">Author</label>
      <input type="text" id="Author" name="Author" pInputText class="p-inputtext p-component smaller-input"
        style="width: 100%" [(ngModel)]="FormData.blogModule.author" [ngModelOptions]="{standalone: true}">
    </div>

    <div class="col-md-6 mt-3 justify-content-center">
      <label for="PublishedDate" class="form-label">Published Date</label><br />
      <p-calendar name="PublishedDate" id="PublishedDate" styleClass="custom-calendar" [showIcon]="true"
        [(ngModel)]="FormData.blogModule.publishedDate" [ngModelOptions]="{standalone: true}">
      </p-calendar>
    </div>

    <div class="col-md-12 mt-3">
      <label for="IsVisible" class="form-check-label">
        <p-checkbox [binary]="true" inputId="binary" [(ngModel)]="FormData.blogModule.isVisible"
          [ngModelOptions]="{standalone: true}" name="IsVisible" id="IsVisible"></p-checkbox> Is Visible?
      </label>
    </div>

    <div class="col-md-12 mt-3">
      <button icon="pi pi-check" type="button" pButton class="primary-button" (click)="onSubmit()"
        style="background-color: green; color: white; border: none;">Save</button>
      <p-toast></p-toast>
      <button icon="pi pi-refresh" type="button" pButton class="ms-2"
        style="background-color: gray; color:white; border: none;" (click)="onReset()">Reset</button>
      <button icon="pi pi-times" type="button" pButton class="ms-2"
        style="background-color: red; color: white; border: none;" (click)="onCancel()">Cancel</button>
    </div>
  </form>
</div>


<div class="images-container-modal" [ngClass]="{'d-block' : displayImageSelector,'d-none':!displayImageSelector}">
  <app-image-selector></app-image-selector>
</div>